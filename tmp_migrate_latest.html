<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-migration/to-v7.0.0" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Migrate to v7.x.x | Baileys</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://baileys.wiki/img/social_card.jpg"><meta data-rh="true" name="twitter:image" content="https://baileys.wiki/img/social_card.jpg"><meta data-rh="true" property="og:url" content="https://baileys.wiki/docs/migration/to-v7.0.0"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migrate to v7.x.x | Baileys"><meta data-rh="true" name="description" content="Baileys 7.0.0 has multiple breaking changes that need to be addressed."><meta data-rh="true" property="og:description" content="Baileys 7.0.0 has multiple breaking changes that need to be addressed."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://baileys.wiki/docs/migration/to-v7.0.0"><link data-rh="true" rel="alternate" href="https://baileys.wiki/docs/migration/to-v7.0.0" hreflang="en"><link data-rh="true" rel="alternate" href="https://baileys.wiki/docs/migration/to-v7.0.0" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.299ca415.css">
<script src="/assets/js/runtime~main.ff9136c0.js" defer="defer"></script>
<script src="/assets/js/main.f61fe16a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/WhiskeySockets-colorful.png"><link rel="preload" as="image" href="/img/Written-By-Human-Not-By-AI-Badge-white.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_ORjg" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/WhiskeySockets-colorful.png" alt="WhiskeySo ckets Logo" class="themedComponent_Uh4S themedComponent--light_qZSH" style="transform:scale(1.25);padding:0 0.5rem"><img src="/img/WhiskeySockets-colorful.png" alt="WhiskeySo ckets Logo" class="themedComponent_Uh4S themedComponent--dark_IEVO" style="transform:scale(1.25);padding:0 0.5rem"></div><b class="navbar__title text--truncate">Baileys</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/docs/api/classes/BinaryInfo">API Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://purpshell.dev/sponsor" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-sponsor-link" aria-label="Sponsor" title="Sponsor">Sponsor</a><a href="https://whiskey.so/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord" title="Discord">Discord</a><a href="https://github.com/WhiskeySockets/Baileys" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub" title="GitHub">GitHub</a><div class="toggle_qLfC colorModeToggle_JkL5"><button class="clean-btn toggleButton_cyxl toggleButtonDisabled_ZpFi" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_uMAh"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_INIx"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_EbB4"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_HkkU"><div class="docsWrapper_aCMH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ujBn" type="button"></button><div class="docRoot_UDJt"><aside class="theme-doc-sidebar-container docSidebarContainer_TlFv"><div class="sidebarViewport_xkSj"><div class="sidebar__SIo"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_I2aY"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/migration/to-v7.0.0">Migrate to v7.x.x</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/socket">Socket</a><button aria-label="Expand sidebar category &#x27;Socket&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">FAQs</a></li></ul></nav></div></div></aside><main class="docMainContainer_oSKW"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_dEmQ"><div class="docItemContainer_EjDF"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer__IBp" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_T2v2"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Migrate to v7.x.x</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_n0Wu theme-doc-toc-mobile tocMobile_eRVg"><button type="button" class="clean-btn tocCollapsibleButton_CTWW">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migrate to v7.x.x</h1></header>
<p>Baileys 7.0.0 has multiple breaking changes that need to be addressed.</p>
<p>Share the link: <a href="https://whiskey.so/migrate-latest" target="_blank" rel="noopener noreferrer">https://whiskey.so/migrate-latest</a></p>
<h2 class="anchor anchorWithStickyNavbar_OLw8" id="lids">LIDs<a href="#lids" class="hash-link" aria-label="Direct link to LIDs" title="Direct link to LIDs">?</a></h2>
<div class="theme-admonition theme-admonition-warning admonition__KMn alert alert--warning"><div class="admonitionHeading_tyNz"><span class="admonitionIcon_Kj5Z"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_aI_8"><p>This system requires the auth state to support the <code>lid-mapping</code> key. Make sure you have updated your authentication state. Also, PLEASE cache it using <a href="/docs/api/functions/makeCacheableSignalKeyStore"><code>makeCacheableSignalKeyStore()</code></a>, as done in the Example, as the cache can be accessed &amp; updated rather quickly.</p></div></div>
<p>WhatsApp finalized its LID (Local Identifier) update (which it started in 2023). This LID system assures the anonymity of users on large groups, allowing the WhatsApp client to show a simple (<code>+43.......21</code>) to hide the phone number. This is done to ensure the privacy of users.</p>
<p>WhatsApp is also adding a username system (<code>@username</code>) later on, so relying on a phone number to identify the user has become cumbersome and sometimes unreliable and impossible. Thus WhatsApp now assigns a LID to each user on its platform.</p>
<p>This LID is unique to each user, like how a JID is. It is NOT unique per group like others have said. You can message anyone using either their LID or their PN.</p>
<p>PN stands for phone number, and is the old JID format you are used to (<code>user@s.whatsapp.net</code>).</p>
<p>By default now, all new Signal sessions are in the LID format. Old sessions will be migrated. On new device sync, the main (mobile) device will include a mapping of <code>PN&lt;-&gt;LID</code>.</p>
<p>WhatsApp allows us to get the LID from a PN using the protocol (<code>onWhatsApp()</code> / USyncProtocol), but not the opposite.</p>
<p>For the sake of businesses and Meta Ads, WhatsApp has used the LIDs for 2 years (<a href="https://github.com/WhiskeySockets/Baileys/pull/408" target="_blank" rel="noopener noreferrer">#408</a>), and in those cases, you (business) can request the user to share the number (send a message with <code>{ requestPhoneNumber: true }</code>), OR you (the user), can share your number with a business (<code>{ sharePhoneNumber: true }</code>).</p>
<p>6.8.0 Introduces the following fields to the MessageKey:</p>
<ul>
<li><code>remoteJidAlt</code> -&gt; this is for DMs</li>
<li><code>participantAlt</code> -&gt; this is for Groups and other contexts (broadcast, channels?, so on)</li>
</ul>
<p>This is the Alternate JID for the user, thus, if participant is a LID, the Alt will be a PN.</p>
<p>Also, in the <a href="/docs/api/interfaces/GroupMetadata">GroupMetadata</a> type, each ID type is now a LID and associated with it is a pn type (<code>owner</code> and <code>ownerPn</code>, <code>descOwner</code> and <code>descOwnerPn</code>, so on..)</p>
<p>In the <a href="/docs/api/interfaces/Contact">Contact</a> type, there are no longer any <code>jid</code>/<code>lid</code> fields. Instead, there is an <code>id</code> field (the preferred one by WhatsApp), and there is a <code>phoneNumber</code> and <code>lid</code> field. One or the other is present depending on the <code>id</code> field. If the <code>id</code> is an LID, then the <code>phoneNumber</code> is present, and vice versa.</p>
<p>NOTE: The changes applied in the <a href="/docs/api/interfaces/Contact">Contact</a> type affect the <a href="/docs/api/interfaces/GroupMetadata#participants"><code>participants</code></a> property of groups as well.</p>
<p>There is also a new enum called <code>WAMessageAddressingMode</code>, this represents the preferred type of ID in a chat or group.</p>
<p>In the events, there is now a <code>lid-mapping.update</code> event that returns a new LID/PN mapping if found (not reported always, this is a WIP).</p>
<p>It also removes the &quot;<code>isJidUser</code>&quot; function and replaces it with &quot;<code>isPnUser</code>&quot;. The reason is that both PNs and LIDs are JIDs, so this isn&#x27;t logical at all.</p>
<p>There is an internal store PNs and LIDs, and it can be accessed via:</p>
<div class="language-ts codeBlockContainer_ePAn theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_L23x"><pre tabindex="0" class="prism-code language-ts codeBlock_E2nN thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_ij85"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> store </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> sock</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">signalRepository</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">lidMapping</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// available methods:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// storeLIDPNMapping, storeLIDPNMappings, getLIDForPN, getPNForLID</span><br></span></code></pre><div class="buttonGroup_QylU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_udND" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon__z2M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_nyMO"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_OLw8" id="esm">ESM<a href="#esm" class="hash-link" aria-label="Direct link to ESM" title="Direct link to ESM">?</a></h2>
<p>Baileys 6.8.0 ditches CommonJS for the sake of ESM. We use multiple ESM packages, and have had to resort to extreme solutions to get them to work with CommmonJS. Not to mention that our linting system was outdated because we relied on CJS (Eslint was multiple major versions behind).</p>
<p>This also limited our expansion into Web, Deno, Bun and other runtimes and limited us severely to Node. It also introduced quirks like <code>makeWASocket.default</code>.</p>
<p>One of the only solutions are:</p>
<ol>
<li>
<p>Convert your project to ESM (recommended):
This involves changing your type in <code>package.json</code> to <code>module</code> and replacing <code>require()</code> calls with <code>import</code> calls.
If you have any remaining CommonJS modules that you still need to use from ESM, you can use <a href="https://nodejs.org/api/module.html#modulecreaterequirefilename" target="_blank" rel="noopener noreferrer"><code>createRequire()</code></a>.</p>
</li>
<li>
<p>Import Baileys from within CommonJS:
This isn&#x27;t recommended, but you can do this by using a <code>await import()</code> call.
Example:</p>
</li>
</ol>
<div class="language-ts codeBlockContainer_ePAn theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_L23x"><pre tabindex="0" class="prism-code language-ts codeBlock_E2nN thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_ij85"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// cjs_module.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// Use require normally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> fs </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">require</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;fs&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">loadESMModule</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token keyword" style="color:rgb(0, 0, 255)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">default</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> makeWASocket </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">await</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;baileys&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(0, 128, 0)">// Dynamic import of an ESM module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> socket </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">makeWASocket</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token operator" style="color:rgb(0, 0, 0)">...</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token builtin" style="color:rgb(0, 112, 193)">console</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token function" style="color:rgb(0, 0, 255)">error</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;Error loading ESM module:&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">loadESMModule</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup_QylU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_udND" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon__z2M"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_nyMO"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this change, the project has also moved to the new version of Yarn (Yarn v4.x) rather than Yarn Classic. This means that the project now requires corepack.</p>
<h2 class="anchor anchorWithStickyNavbar_OLw8" id="protobufs">Protobufs<a href="#protobufs" class="hash-link" aria-label="Direct link to Protobufs" title="Direct link to Protobufs">?</a></h2>
<p>To drastically reduce the bundle size of Baileys, we have removed some methods in the <code>proto</code> package. The only ones that remain are: <code>.create()</code> (to be used in the place of <code>.fromObject()</code>), and <code>.encode()</code> / <code>.decode()</code></p>
<p>For the full patch notes of 7.0.0, check the latest GitHub release: <a href="https://github.com/WhiskeySockets/Baileys/releases/" target="_blank" rel="noopener noreferrer">https://github.com/WhiskeySockets/Baileys/releases/</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/WhiskeySockets/baileys.wiki-site/tree/main/docs/migration/to-v7.0.0.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bztr" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_Kt5i"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/socket"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Socket</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_ZQaD thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lids" class="table-of-contents__link toc-highlight">LIDs</a></li><li><a href="#esm" class="table-of-contents__link toc-highlight">ESM</a></li><li><a href="#protobufs" class="table-of-contents__link toc-highlight">Protobufs</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/WhiskeySockets/Baileys" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_qz8H"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/Written-By-Human-Not-By-AI-Badge-white.svg" class="footer__logo themedComponent_Uh4S themedComponent--light_qZSH"><img src="/img/Written-By-Human-Not-By-AI-Badge-white.svg" class="footer__logo themedComponent_Uh4S themedComponent--dark_IEVO"></div><div class="footer__copyright">Copyright © 2025 Rajeh Taher, WhiskeySockets.</div></div></div></footer></div>
</body>
</html>
